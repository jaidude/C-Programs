#include<stdio.h>
#include<conio.h>
#include<iostream>
using namespace std;
int main()
{
	int n;
	int ch;
	int mutex = 1;
	int empty = 0;
	int full = 0;
	int x = 0;
	void producer();
	void consumer();
	int wait(int);
	int signal(int);
	cout << "\n enter the buffer size: ";
	cin >> n;
	empty = n;
	cout<<"\n1.Producer\n2.Consumer\n3.Exit";
	while (1)
	{
		cout<<"\nEnter your choice:";
		cin >> ch;
		switch (ch)
		{
		case 1:    if ((mutex == 1) && (empty != 0))
		{
			mutex = wait(mutex);
			full = signal(full);
			empty = wait(empty);
			x++;
			cout << "\nProducer produces the item: " << x;
			mutex = signal(mutex);
		}
				   else
					   cout<<"Buffer is full!!";
			break;
		case 2:    if ((mutex == 1) && (full != 0))
		{
			mutex = wait(mutex);
			full = wait(full);
			empty = signal(empty);
			cout << "\nConsumer consumes item: " << x;
			x--;
			mutex = signal(mutex);
		}
				   else
					   cout<<"Buffer is empty!!";
			break;
		case 3:
			exit(0);
			break;
		}
	}
	_getch();
	return 0;
	
}
int wait(int s)
{
	return (--s);
}

int signal(int s)
{
	return(++s);
}
